
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
  <title>app_led.c</title>

  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.5.1.min.js"></script>
</head>
<body>

<pre><code class = "cpp">
<a name="ln1">#include &quot;app_led.h&quot;</a>
<a name="ln2">#include &quot;ruuvi_boards.h&quot;</a>
<a name="ln3">#include &quot;ruuvi_driver_error.h&quot;</a>
<a name="ln4">#include &quot;ruuvi_interface_gpio.h&quot;</a>
<a name="ln5">#include &quot;ruuvi_task_led.h&quot;</a>
<a name="ln6"> </a>
<a name="ln7">/**</a>
<a name="ln8"> * @addtogroup app_led</a>
<a name="ln9"> */</a>
<a name="ln10">/** @{ */</a>
<a name="ln11">/**</a>
<a name="ln12"> * @file app_led.c</a>
<a name="ln13"> * @author Otso Jousimaa &lt;otso@ojousima.net&gt;</a>
<a name="ln14"> * @date 2020-09-10</a>
<a name="ln15"> * @copyright Ruuvi Innovations Ltd, license BSD-3-Clause.</a>
<a name="ln16"> */</a>
<a name="ln17"> </a>
<a name="ln18">static const uint16_t        m_led_pins[]   = RB_LEDS_LIST;</a>
<a name="ln19">static const ri_gpio_state_t m_led_active[] = RB_LEDS_ACTIVE_STATE;</a>
<a name="ln20">#ifndef CEEDLING</a>
<a name="ln21">static</a>
<a name="ln22">#endif</a>
<a name="ln23">ri_gpio_id_t m_activity_led          = RI_GPIO_ID_UNUSED;</a>
<a name="ln24">static bool m_activity_ind_paused;</a>
<a name="ln25"> </a>
<a name="ln26">rd_status_t app_led_init (void)</a>
<a name="ln27">{</a>
<a name="ln28">    rd_status_t err_code = RD_SUCCESS;</a>
<a name="ln29">    err_code |= rt_led_init (m_led_pins, m_led_active, RB_LEDS_NUMBER);</a>
<a name="ln30">    return  err_code;</a>
<a name="ln31">}</a>
<a name="ln32"> </a>
<a name="ln33">rd_status_t app_led_activate (const ri_gpio_id_t led)</a>
<a name="ln34">{</a>
<a name="ln35">    return rt_led_write (led, true);</a>
<a name="ln36">}</a>
<a name="ln37"> </a>
<a name="ln38">rd_status_t app_led_deactivate (const ri_gpio_id_t led)</a>
<a name="ln39">{</a>
<a name="ln40">    return rt_led_write (led, false);</a>
<a name="ln41">}</a>
<a name="ln42"> </a>
<a name="ln43">rd_status_t app_led_activity_set (const ri_gpio_id_t led)</a>
<a name="ln44">{</a>
<a name="ln45">    rd_status_t err_code = RD_SUCCESS;</a>
<a name="ln46"> </a>
<a name="ln47">    if (RI_GPIO_ID_UNUSED != m_activity_led)</a>
<a name="ln48">    {</a>
<a name="ln49">        err_code |= app_led_deactivate (m_activity_led);</a>
<a name="ln50">    }</a>
<a name="ln51"> </a>
<a name="ln52">    err_code |= app_led_deactivate (led);</a>
<a name="ln53"> </a>
<a name="ln54">    if (RD_SUCCESS == err_code)</a>
<a name="ln55">    {</a>
<a name="ln56">        m_activity_led = led;</a>
<a name="ln57">    }</a>
<a name="ln58"> </a>
<a name="ln59">    return err_code;</a>
<a name="ln60">}</a>
<a name="ln61"> </a>
<a name="ln62">rd_status_t app_led_activity_indicate (const bool active)</a>
<a name="ln63">{</a>
<a name="ln64">    rd_status_t err_code = RD_SUCCESS;</a>
<a name="ln65"> </a>
<a name="ln66">    if (!m_activity_ind_paused)</a>
<a name="ln67">    {</a>
<a name="ln68">        if (active)</a>
<a name="ln69">        {</a>
<a name="ln70">            err_code |= app_led_activate (m_activity_led);</a>
<a name="ln71">        }</a>
<a name="ln72">        else</a>
<a name="ln73">        {</a>
<a name="ln74">            err_code |= app_led_deactivate (m_activity_led);</a>
<a name="ln75">        }</a>
<a name="ln76">    }</a>
<a name="ln77"> </a>
<a name="ln78">    return err_code;</a>
<a name="ln79">}</a>
<a name="ln80"> </a>
<a name="ln81">void app_led_activity_pause (const bool pause)</a>
<a name="ln82">{</a>
<a name="ln83">    m_activity_ind_paused = pause;</a>
<a name="ln84">}</a>
<a name="ln85"> </a>
<a name="ln86">/** @} */</a>

</code></pre>
<div class="balloon" rel="18"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2544/" target="_blank">V2544</a> The left operand '(0)' of the '<<' operator should not have the essential 'signed' type.</p></div>
<div class="balloon" rel="47"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v2568/" target="_blank">V2568</a> Both operands of the '!=' operator should have the same essential type. The current types are: 'signed' and 'unsigned'.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
